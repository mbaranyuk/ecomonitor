/*
 @product.name@ JS v@product.version@ (@product.date@)
 Exporting module

 (c) 2010-2013 Torstein HÃ¸nsi

 License: www.highcharts.com/license
*/
(function(e){var z=e.Chart,x=e.addEvent,C=e.removeEvent,n=e.createElement,k=e.discardElement,w=e.css,l=e.merge,u=e.each,s=e.extend,D=Math.max,j=document,A=window,E=e.isTouchDevice,F=e.Renderer.prototype.symbols,v=e.getOptions(),p;s(v.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});v.navigation={menuStyle:{border:"1px solid #A0A0A0",
background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:E?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};v.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",
_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};e.post=function(a,b){var c,d;d=n("form",{method:"post",action:a,enctype:"multipart/form-data"},
{display:"none"},j.body);for(c in b)n("input",{type:"hidden",name:c,value:b[c]},null,d);d.submit();k(d)};s(z.prototype,{getSVG:function(a){var b=this,c,d,y,g,f=l(b.options,a);j.createElementNS||(j.createElementNS=function(a,b){return j.createElement(b)});a=n("div",null,{position:"absolute",top:"-9999em",width:b.chartWidth+"px",height:b.chartHeight+"px"},j.body);d=b.renderTo.style.width;g=b.renderTo.style.height;d=f.exporting.sourceWidth||f.chart.width||/px$/.test(d)&&parseInt(d,10)||600;g=f.exporting.sourceHeight||
f.chart.height||/px$/.test(g)&&parseInt(g,10)||400;s(f.chart,{animation:!1,renderTo:a,forExport:!0,width:d,height:g});f.exporting.enabled=!1;f.chart.plotBackgroundImage=null;f.series=[];u(b.series,function(a){y=l(a.options,{animation:!1,showCheckbox:!1,visible:a.visible});y.isInternal||f.series.push(y)});c=new e.Chart(f,b.callback);u(["xAxis","yAxis"],function(a){u(b[a],function(b,d){var f=c[a][d],e=b.getExtremes(),g=e.userMin,e=e.userMax;(void 0!==g||void 0!==e)&&f.setExtremes(g,e,!0,!1)})});d=c.container.innerHTML;
f=null;c.destroy();k(a);d=d.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g,"\u00a0").replace(/&shy;/g,"\u00ad").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,
'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(a){return a.toLowerCase()});d=d.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");2===d.match(/ xmlns="/g).length&&(d=d.replace(/xmlns="[^"]+"/,""));return d},exportChart:function(a,b){a=a||{};var c=this.getSVG(l({chart:{borderRadius:0}},this.options.exporting.chartOptions,b,{exporting:{sourceWidth:a.sourceWidth,
sourceHeight:a.sourceHeight}}));a=l(this.options.exporting,a);e.post(a.url,{filename:a.filename||"chart",type:a.type,width:a.width||0,scale:a.scale||2,svg:c})},print:function(){var a=this,b=a.container,c=[],d=b.parentNode,e=j.body,g=e.childNodes;a.isPrinting||(a.isPrinting=!0,u(g,function(a,b){1===a.nodeType&&(c[b]=a.style.display,a.style.display="none")}),e.appendChild(b),A.focus(),A.print(),setTimeout(function(){d.appendChild(b);u(g,function(a,b){1===a.nodeType&&(a.style.display=c[b])});a.isPrinting=
!1},1E3))},contextMenu:function(a,b,c,d,e,g,f){var h=this,t=h.options.navigation,q=t.menuItemStyle,r=h.chartWidth,j=h.chartHeight,B="cache-"+a,m=h[B],l=D(e,g),p,k,v;m||(h[B]=m=n("div",{className:"highcharts-"+a},{position:"absolute",zIndex:1E3,padding:l+"px"},h.container),p=n("div",null,s({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},t.menuStyle),m),k=function(){w(m,{display:"none"});f&&f.setState(0)},x(m,"mouseleave",function(){v=setTimeout(k,
500)}),x(m,"mouseenter",function(){clearTimeout(v)}),u(b,function(a){if(a){var b=a.separator?n("hr",null,null,p):n("div",{onmouseover:function(){w(this,t.menuItemHoverStyle)},onmouseout:function(){w(this,q)},onclick:function(){k();a.onclick.apply(h,arguments)},innerHTML:a.text||h.options.lang[a.textKey]},s({cursor:"pointer"},q),p);h.exportDivElements.push(b)}}),h.exportDivElements.push(p,m),h.exportMenuWidth=m.offsetWidth,h.exportMenuHeight=m.offsetHeight);a={display:"block"};c+h.exportMenuWidth>
r?a.right=r-c-e-l+"px":a.left=c-l+"px";d+g+h.exportMenuHeight>j?a.bottom=j-d-l+"px":a.top=d+g-l+"px";w(m,a)},addButton:function(a){var b=this,c=b.renderer;a=l(b.options.navigation.buttonOptions,a);var d=a.onclick,j=a.menuItems,g,f,h={stroke:a.symbolStroke,fill:a.symbolFill},t=a.symbolSize||12;b.btnCount||(b.btnCount=0);b.btnCount++;b.exportDivElements||(b.exportDivElements=[],b.exportSVGElements=[]);if(!1!==a.enabled){var q=a.theme,r=q.states,n=r&&r.hover,r=r&&r.select,k;delete q.states;d?k=function(){d.apply(b,
arguments)}:j&&(k=function(){b.contextMenu("contextmenu",j,f.translateX,f.translateY,f.width,f.height,f);f.setState(2)});a.text&&a.symbol?q.paddingLeft=e.pick(q.paddingLeft,25):a.text||s(q,{width:a.width,height:a.height,padding:0});f=c.button(a.text,0,0,k,q,n,r).attr({title:b.options.lang[a._titleKey],"stroke-linecap":"round"});a.symbol&&(g=c.symbol(a.symbol,a.symbolX-t/2,a.symbolY-t/2,t,t).attr(s(h,{"stroke-width":a.symbolStrokeWidth||1,zIndex:1})).add(f));f.add().align(s(a,{width:f.width,x:e.pick(a.x,
p)}),!0,"spacingBox");p+=(f.width+a.buttonSpacing)*("right"===a.align?-1:1);b.exportSVGElements.push(f,g)}},destroyExport:function(a){a=a.target;var b,c;for(b=0;b<a.exportSVGElements.length;b++)c=a.exportSVGElements[b],c.onclick=c.ontouchstart=null,a.exportSVGElements[b]=c.destroy();for(b=0;b<a.exportDivElements.length;b++)c=a.exportDivElements[b],C(c,"mouseleave"),a.exportDivElements[b]=c.onmouseout=c.onmouseover=c.ontouchstart=c.onclick=null,k(c)}});F.menu=function(a,b,c,d){return["M",a,b+2.5,"L",
a+c,b+2.5,"M",a,b+d/2+0.5,"L",a+c,b+d/2+0.5,"M",a,b+d-1.5,"L",a+c,b+d-1.5]};z.prototype.callbacks.push(function(a){var b,c=a.options.exporting,d=c.buttons;p=0;if(!1!==c.enabled){for(b in d)a.addButton(d[b]);x(a,"destroy",a.destroyExport)}})})(Highcharts);window.console&&console.log('--- Running modules/exporting.src.js from GitHub, branch/commit/tag "master" ---');
